# 進捗状況 (Progress)

## 機能している機能

現時点でWOLF MANSIONフロントエンドプロジェクトでは、以下の機能が実装され動作しています：

1. **プロジェクト基盤**:

   - Next.jsプロジェクトの基本構成
   - TypeScriptの設定
   - Tailwind CSSの設定
   - ESLintとPrettierの設定

2. **UI基盤**:

   - メインページのレイアウト
   - ナビゲーションリンク
   - 基本的なUIコンポーネント
   - モーダルコンポーネント（ダークテーマ、モーダル外クリックで閉じる、ESCキーで閉じる）
   - ボタンコンポーネント（複数のバリアントとサイズ、ローディング状態）
   - パンくずリストコンポーネント（ホームへの動線を提供、複数階層に対応）
   - 再利用可能なスタイル定義（globals.scss）

3. **API連携**:

   - APIクライアントの基本実装
   - 村一覧データの取得機能
   - OpenAPIからの型定義生成
   - ユーザー認証API連携（ログイン、ID登録、パスワード変更、ログアウト）

4. **ユーザー認証**:

   - ログインモーダル
   - ID登録モーダル
   - パスワード変更モーダル
   - 認証状態管理フック（useAuth）
   - ログイン状態に応じたUI表示

5. **静的ページ**:
   - Aboutページ（サイトの説明、人狼館の事件簿村の説明、注意事項など）
   - Announceページ（リリースノート）
     - 年ごとにセクションを分けて表示（2025年から2018年まで）
     - 各年のコンポーネントを別ファイルに分割して管理
     - Aboutページと同じデザインを適用

## 構築中の機能

以下の機能は現在開発中または計画段階です：

1. **村一覧表示**:

   - フィルタリングと並び替え機能

2. **ユーザー認証**:

   - ユーザープロフィール管理

3. **村詳細ページ**:

   - 村の詳細情報表示
   - 村への参加機能
   - 村の設定変更機能

4. **ゲームプレイ画面**:
   - ゲーム状態の表示
   - アクション実行UI
   - 投票システム
   - 足音情報の表示

## 現在のステータス

プロジェクトは初期開発段階にあり、基本的なUI実装とAPI連携の一部が完了しています。トップページの開発が完了し、静的ページ（AboutとAnnounce）も実装されました。次のステップとしてユーザープロフィール管理や村詳細ページの実装に進む予定です。

### 完了率の概算

| 機能カテゴリ     | 完了率 | 備考                                                                                                                     |
| ---------------- | ------ | ------------------------------------------------------------------------------------------------------------------------ |
| プロジェクト基盤 | 90%    | 基本設定は完了、必要に応じて調整                                                                                         |
| UI基盤           | 85%    | 基本レイアウト、モーダル、ボタン、パンくずリスト、再利用可能なスタイル定義など実装済み                                   |
| API連携          | 60%    | 基本的なHTTPリクエスト関数、ユーザー認証API連携、村一覧API連携は実装済み                                                 |
| 村一覧機能       | 100%   | 基本的な表示機能は完了、フィルタリングと並び替え機能は今後の拡張として検討                                               |
| ユーザー認証     | 90%    | ログイン、ID登録、パスワード変更、ログアウト機能、ユーザー名表示は実装済み                                               |
| 静的ページ       | 70%    | Aboutページ、Announceページ（リリースノート）は実装済み、その他の静的ページ（ルール、FAQ、キャラチップ一覧など）は未実装 |
| 村詳細ページ     | 0%     | 未着手                                                                                                                   |
| ゲームプレイ画面 | 0%     | 未着手                                                                                                                   |

## 既知の問題

現時点で以下の問題が確認されています：

1. **APIエラーハンドリング**:

   - APIエラーの詳細なハンドリングが未実装
   - エラーメッセージの表示UIが未実装

2. **型定義の不完全性**:

   - 一部のAPIレスポンスの型定義が不完全
   - バックエンドAPIの変更に伴う型定義の更新が必要

3. **レスポンシブデザイン**:

   - モバイル表示の最適化が不十分
   - 一部のUIコンポーネントがモバイル表示で崩れる可能性あり

4. **ユーザー認証**:
   - ログアウト処理がAPI側の問題で正しく機能していない可能性あり
   - マイページへのリンク（`/user/{username}`）が404エラーになる

## 次のマイルストーン

### マイルストーン1: 基本UI実装の完了

- 村一覧のフィルタリングと並び替え機能の実装
- ユーザープロフィール管理の実装
- 全体的なUIデザインの統一
- 残りの静的ページ（ルール、FAQ、キャラチップ一覧など）の実装

### マイルストーン2: 村詳細機能の実装

- 村詳細ページの実装
- 村作成機能の実装
- 村参加機能の実装

### マイルストーン3: ゲームプレイ機能の実装

- ゲーム状態表示の実装
- アクション実行機能の実装
- 投票システムの実装
- 足音情報表示の実装

## 技術的な負債

1. **コンポーネントの再利用性**:

   - 一部のUIコンポーネントが特定のページに依存しており、再利用性が低い
   - コンポーネントの抽象化と再構成が必要

2. **状態管理の一貫性**:

   - 状態管理の方法が統一されていない
   - グローバル状態管理の導入を検討

3. **テストの不足**:

   - 単体テストと統合テストが未実装
   - テスト戦略の策定が必要

4. **セキュリティ対策**:
   - パスワード入力フィールドに`autocomplete="new-password"`属性の追加が必要
   - CSRFトークンの実装が必要

これらの問題は、プロジェクトの進行に伴って順次対応していく予定です。
