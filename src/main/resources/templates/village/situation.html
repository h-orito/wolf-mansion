<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>フッター</title>
<link rel="shortcut icon" href="../../static/app/images/favicon.ico" th:href="@{/app/images/favicon.ico}" />
<link rel="stylesheet" href="../../static/lib/bootstrap/css/bootstrap.min.css" th:href="@{/lib/bootstrap/css/bootstrap.min.css}" />
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
<script src="../../static/lib/bootstrap/js/bootstrap.min.js" th:src="@{/lib/bootstrap/js/bootstrap.min.js}"></script>
<script src="../../static/resources/lib/handlebars/js/handlebars-v4.0.10.js" th:src="@{/resources/lib/handlebars/js/handlebars-v4.0.10.js}"></script>
<script src="../../static/resources/app/js/common.js" th:src="@{/resources/app/js/common.js}"></script>
</head>
<body>
	<div class="col-sm-12 col-xs-12" layout:fragment="situation">
		<div class="panel-group" id="situation-panel">
			<div class="panel panel-default">
				<div class="panel-heading">
					<a class="h5" data-toggle="collapse" data-parent="#situation-panel" href="#situation-content" data-situation-tab-open>状況</a> <a
						href="javascript:void(0);" class="pull-right" data-bottom-fix>固定</a>
				</div>
				<div id="situation-content" class="panel-collapse collapse in">
					<div class="panel-body">
						<ul class="nav nav-tabs">
							<li th:if="${content.roomWidth != null}" class="active"><a data-toggle="tab" href="#room-on-sayform">部屋割り当て</a></li>
							<li th:class="${content.roomWidth == null ? 'active' : ''}"><a data-toggle="tab" href="#tab-memberlist">参加者</a></li>
							<li th:if="${content.vote != null}"><a data-toggle="tab" href="#tab-votelist">投票</a></li>
							<li th:if="${content.villageFootstepList != null}"><a data-toggle="tab" href="#tab-footsteplist">足音</a></li>
						</ul>

						<div class="tab-content row">
							<div id="room-on-sayform" th:if="${content.roomWidth != null}" class="tab-pane fade in active" style="padding-top: 10px; padding-bottom: 10px;">
								<div class="col-sm-12 col-xs-12">
									<table class="table-bordered table-condensed small">
										<tbody>
											<tr th:each="row : ${content.roomAssignedRowList}">
												<td th:each="room: ${row.roomAssignedList}" class="small"
													th:style="'vertical-align: bottom; text-align: center; width: ' 
														+ ${room.charaImgWidth != null ? room.charaImgWidth : '50'} + 'px; height: '
														+ ${room.charaImgHeight != null ? room.charaImgHeight : '77'} + 'px; '
									 					+ ${room.charaImgUrl != null ? 'background-image: url(''' + room.charaImgUrl + '''); background-repeat: no-repeat; background-size: contain;' : 'background-color: #gray; '}
									 					+ ${room.isDead == null || room.isDead ? 'opacity: 0.3;' : ''}">
													<span style="background-color: #222222; opacity: 0.8; white-space: nowrap;"
													th:utext="${room.roomNumber} + ' ' + ${room.charaName != null ? room.charaName : ''}
											        + ${room.skillName != null ? '<br />' + room.skillName : ''}">01.
														楽</span>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
							<div id="tab-memberlist" th:class="${content.roomWidth == null ? 'tab-pane fade in active' : 'tab-pane fade'}"
								style="padding-top: 10px; padding-bottom: 10px;">
								<div class="col-sm-6 col-xs-6">
									<table class="table table-bordered table-condensed small" th:each="statusDto, s : ${content.memberList}" th:if=${s.first}>
										<tr>
											<th th:text="${statusDto.status}">生存</th>
										</tr>
										<tr th:each="member : ${statusDto.statusMemberList}">
											<td th:text="${member.deadDay != null ? member.deadDay + ' ' : ''} + ${member.charaName}"></td>
										</tr>
										<tr th:if="${statusDto.statusMemberList.size() == 0}">
											<td>なし</td>
										</tr>
									</table>
								</div>
								<div class="col-sm-6 col-xs-6">
									<table class="table table-bordered table-condensed small" th:each="statusDto, s : ${content.memberList}" th:unless=${s.first}>
										<tr>
											<th th:text="${statusDto.status}">生存</th>
										</tr>
										<tr th:each="member : ${statusDto.statusMemberList}">
											<td th:text="${member.deadDay != null ? member.deadDay + ' ' : ''} + ${member.charaName}"></td>
										</tr>
										<tr th:if="${statusDto.statusMemberList.size() == 0}">
											<td>なし</td>
										</tr>
									</table>
								</div>
							</div>
							<div id="tab-votelist" th:if="${content.vote != null}" class="tab-pane fade" style="padding-top: 10px; padding-bottom: 10px;">
								<div class="col-sm-12 col-xs-12">
									<table class="table-bordered table-condensed small text-center">
										<thead>
											<tr>
												<th>投票者</th>
												<th th:each="i : ${#numbers.sequence(2, content.vote.maxVoteCount+1)}" th:value="${i}" th:text="${i + 'd'}"></th>
											</tr>
										</thead>
										<tbody>
											<tr th:each="member : ${content.vote.voteList}">
												<td th:text="${member.charaName}"></td>
												<td th:each="target: ${member.voteTargetList}" class="small" th:text="${target}"></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
							<div id="tab-footsteplist" th:if="${content.villageFootstepList != null}" class="tab-pane fade"
								style="padding-top: 10px; padding-bottom: 10px;">
								<div class="col-sm-12 col-xs-12">
									<table class="table-bordered table-condensed small">
										<tbody>
											<tr th:if="${content.roomAssignedRowList}">
												<td colspan="2"><th:block th:each="row, s : ${content.roomAssignedRowList}">
														<th:block th:each="room, st: ${row.roomAssignedList}">
															<span
																th:text="${room.isDead == null || room.isDead ? room.roomNumber + '＿' : room.charaName != null ? room.roomNumber + room.charaName : room.roomNumber + '＿'}"></span>
															<span th:if="${!st.last}" th:text="'　'"></span>
														</th:block>
														<br />
														<br th:if="${!s.last}" />
													</th:block></td>
											</tr>
											<tr th:each="day : ${content.villageFootstepList}">
												<td class="text-center" th:text="${day.day + 'd'}"></td>
												<td class="small"><th:block th:if="${day.footstep}">
														<th:block th:each="str, stat : ${day.footstep.split('\r\n|\r|\n', -1)}">
															<th:block th:text="${str}" />
															<br th:if="${!stat.last}" />
														</th:block>
													</th:block></td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>